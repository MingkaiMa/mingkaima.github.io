<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"mingkaima.xyz","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Mingkai&#39;s personal blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Mingkai&#39;s Blog">
<meta property="og:url" content="https://mingkaima.xyz/index.html">
<meta property="og:site_name" content="Mingkai&#39;s Blog">
<meta property="og:description" content="Mingkai&#39;s personal blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Mingkai Ma">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://mingkaima.xyz/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Mingkai's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Mingkai's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2021/07/13/SingletonPattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/13/SingletonPattern/" class="post-title-link" itemprop="url">Singleton Pattern</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-07-13 22:38:47 / Modified: 22:42:13" itemprop="dateCreated datePublished" datetime="2021-07-13T22:38:47+10:00">2021-07-13</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Singleton-Pattern"><a href="#Singleton-Pattern" class="headerlink" title="Singleton Pattern"></a>Singleton Pattern</h1><p>This pattern makes sure that the instantiation of a class can only be one single instance.</p>
<p>C++ code exmaple shows below:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">static</span> Singleton* <span class="title">getInstance</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showMessage</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Singelton\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">Singleton</span>()&#123;&#125;</span><br><span class="line">    <span class="keyword">static</span> Singleton* _instance;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Delete copy/move so extra instances can&#x27;t be created/moved.</span></span><br><span class="line">    <span class="built_in">Singleton</span>(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(<span class="keyword">const</span> Singleton&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    <span class="built_in">Singleton</span>(Singleton&amp;&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">    Singleton&amp; <span class="keyword">operator</span>=(Singleton&amp;&amp;) = <span class="keyword">delete</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">Singleton* <span class="title">Singleton::getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(_instance == <span class="number">0</span>) &#123;</span><br><span class="line">        _instance = <span class="keyword">new</span> <span class="built_in">Singleton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _instance;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// define and initialize static member variable outside the class</span></span><br><span class="line">Singleton* Singleton::_instance= <span class="literal">nullptr</span>;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Singleton* singletonInstance = Singleton::<span class="built_in">getInstance</span>();</span><br><span class="line">    singletonInstance-&gt;<span class="built_in">showMessage</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2021/07/11/PrototypePattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/11/PrototypePattern/" class="post-title-link" itemprop="url">Prototype Pattern</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-07-11 21:05:24 / Modified: 21:09:41" itemprop="dateCreated datePublished" datetime="2021-07-11T21:05:24+10:00">2021-07-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Protytype"><a href="#Protytype" class="headerlink" title="Protytype"></a>Protytype</h1><p>The prototype pattern is a creational design pattern in software development. It is used when the type of objects to create is determined by a prototypical instance, which is cloned to produce new objects.</p>
<p>The UML diagram shows below:</p>
<p><img src="https://res.cloudinary.com/dlnr9fafw/image/upload/v1626001631/Prototype_UML_nbuwbm.svg"></p>
<p>Java Code Example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"># source: https:<span class="comment">//www.runoob.com/design-pattern/prototype-pattern.html</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">private</span> String id;</span><br><span class="line">   <span class="keyword">protected</span> String type;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getType</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">return</span> type;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> id;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.id = id;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> Object <span class="title">clone</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      Object clone = <span class="keyword">null</span>;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">         clone = <span class="keyword">super</span>.clone();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (CloneNotSupportedException e) &#123;</span><br><span class="line">         e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> clone;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Rectangle</span><span class="params">()</span></span>&#123;</span><br><span class="line">     type = <span class="string">&quot;Rectangle&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Inside Rectangle::draw() method.&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Square</span><span class="params">()</span></span>&#123;</span><br><span class="line">     type = <span class="string">&quot;Square&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Inside Square::draw() method.&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Circle</span><span class="params">()</span></span>&#123;</span><br><span class="line">     type = <span class="string">&quot;Circle&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Inside Circle::draw() method.&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mport java.util.Hashtable;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShapeCache</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> Hashtable&lt;String, Shape&gt; shapeMap </span><br><span class="line">      = <span class="keyword">new</span> Hashtable&lt;String, Shape&gt;();</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Shape <span class="title">getShape</span><span class="params">(String shapeId)</span> </span>&#123;</span><br><span class="line">      Shape cachedShape = shapeMap.get(shapeId);</span><br><span class="line">      <span class="keyword">return</span> (Shape) cachedShape.clone();</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">loadCache</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      Circle circle = <span class="keyword">new</span> Circle();</span><br><span class="line">      circle.setId(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">      shapeMap.put(circle.getId(),circle);</span><br><span class="line"> </span><br><span class="line">      Square square = <span class="keyword">new</span> Square();</span><br><span class="line">      square.setId(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">      shapeMap.put(square.getId(),square);</span><br><span class="line"> </span><br><span class="line">      Rectangle rectangle = <span class="keyword">new</span> Rectangle();</span><br><span class="line">      rectangle.setId(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">      shapeMap.put(rectangle.getId(),rectangle);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrototypePatternDemo</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      ShapeCache.loadCache();</span><br><span class="line"> </span><br><span class="line">      Shape clonedShape = (Shape) ShapeCache.getShape(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;Shape : &quot;</span> + clonedShape.getType());        </span><br><span class="line"> </span><br><span class="line">      Shape clonedShape2 = (Shape) ShapeCache.getShape(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;Shape : &quot;</span> + clonedShape2.getType());        </span><br><span class="line"> </span><br><span class="line">      Shape clonedShape3 = (Shape) ShapeCache.getShape(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;Shape : &quot;</span> + clonedShape3.getType());        </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Result:</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Shape : Circle</span></span><br><span class="line"><span class="comment">Shape : Square</span></span><br><span class="line"><span class="comment">Shape : Rectangle</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2021/07/07/FactoryPattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/07/FactoryPattern/" class="post-title-link" itemprop="url">Factory Method Pattern</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-07 18:01:20" itemprop="dateCreated datePublished" datetime="2021-07-07T18:01:20+10:00">2021-07-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-08 13:11:36" itemprop="dateModified" datetime="2021-07-08T13:11:36+10:00">2021-07-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Factory-Method-Pattern"><a href="#Factory-Method-Pattern" class="headerlink" title="Factory Method Pattern"></a>Factory Method Pattern</h1><p>The factory method pattern is a creational pattern that uses factory methods to deal with the problems of creating objects without having to specify the exact class of the object that will be created.</p>
<p>The UML diagram shows below:</p>
<p><img src="https://res.cloudinary.com/dlnr9fafw/image/upload/v1625645045/W3sDesign_Factory_Method_Design_Pattern_UML_bzasbp.jpg"></p>
<p>C++ code example: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      std::cout &lt;&lt; <span class="string">&quot;Render a general style\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinuxButton</span> :</span> <span class="keyword">public</span> Button &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      std::cout &lt;&lt; <span class="string">&quot;Render a button in Linux style\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WindowsButton</span> :</span> <span class="keyword">public</span> Button &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      std::cout &lt;&lt; <span class="string">&quot;Render a button in Windows style\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MacOSButton</span> :</span> <span class="keyword">public</span> Button &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      std::cout &lt;&lt; <span class="string">&quot;Render a button in MacOSButton style\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GUIFactory</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">GUIFactory</span>() &#123;</span><br><span class="line">      <span class="built_in">makeButton</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      button = <span class="keyword">new</span> <span class="built_in">Button</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      button-&gt;<span class="built_in">paint</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    Button* button;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinuxFactory</span>:</span> <span class="keyword">public</span> GUIFactory &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">LinuxFactory</span>()&#123;</span><br><span class="line">    <span class="built_in">makeButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    button = <span class="keyword">new</span> <span class="built_in">LinuxButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WindowsFactory</span>:</span> <span class="keyword">public</span> GUIFactory &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">WindowsFactory</span>() &#123;</span><br><span class="line">    <span class="built_in">makeButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    button = <span class="keyword">new</span> <span class="built_in">WindowsButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MacOSFactory</span>:</span> <span class="keyword">public</span> GUIFactory &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">MacOSFactory</span>() &#123;</span><br><span class="line">    <span class="built_in">makeButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    button = <span class="keyword">new</span> <span class="built_in">MacOSButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">  GUIFactory* linuxFactory = <span class="keyword">new</span> <span class="built_in">LinuxFactory</span>();</span><br><span class="line">  linuxFactory-&gt;<span class="built_in">paint</span>();</span><br><span class="line"></span><br><span class="line">  GUIFactory* windowsFactory = <span class="keyword">new</span> <span class="built_in">WindowsFactory</span>();</span><br><span class="line">  windowsFactory-&gt;<span class="built_in">paint</span>();</span><br><span class="line"></span><br><span class="line">  GUIFactory* macOSFactory = <span class="keyword">new</span> <span class="built_in">MacOSFactory</span>();</span><br><span class="line">  macOSFactory-&gt;<span class="built_in">paint</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2021/07/07/BuilderPattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/07/BuilderPattern/" class="post-title-link" itemprop="url">Builder Pattern</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-07-07 16:33:06 / Modified: 18:06:10" itemprop="dateCreated datePublished" datetime="2021-07-07T16:33:06+10:00">2021-07-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Builder-Pattern"><a href="#Builder-Pattern" class="headerlink" title="Builder Pattern"></a>Builder Pattern</h1><p>The builder pattern is designed to provide a flexible solution to various object creations in OOP. It is to separate the construction of a complex object from its representation.</p>
<p>The UML diagram shows below:</p>
<p><img src="https://res.cloudinary.com/dlnr9fafw/image/upload/v1625639742/W3sDesign_Builder_Design_Pattern_UML_xdtnco.jpg"></p>
<p>C++ code example:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Bicycle</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    std::string _make;</span><br><span class="line">    std::string _model;</span><br><span class="line">    <span class="keyword">int</span> _height;</span><br><span class="line">    std::string _color;</span><br><span class="line">    <span class="built_in">Bicycle</span>() &#123;&#125;;</span><br><span class="line">    <span class="built_in">Bicycle</span>(std::string make, std::string model, <span class="keyword">int</span> height, std::string color): _make(make), _model(model), _height(height), _color(color) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">bicycleBuilder</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">bicycleBuilder</span>() &#123;&#125;;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">buildBicycle</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">buildBikeColor</span><span class="params">(std::string color)</span> </span>&#123;&#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">buildBikeHeight</span><span class="params">(<span class="keyword">int</span> height)</span> </span>&#123;&#125;;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> Bicycle* <span class="title">getBike</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> <span class="number">0</span>; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">standardBikeBuilder</span>:</span> <span class="keyword">public</span> bicycleBuilder &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">standardBikeBuilder</span>() &#123;</span><br><span class="line">    _bike = <span class="literal">NULL</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">buildBicycle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    _bike = <span class="keyword">new</span> <span class="built_in">Bicycle</span>();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">buildBikeColor</span><span class="params">(std::string color)</span> </span>&#123;</span><br><span class="line">    _bike-&gt;_color = color;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;build standard bike color: &quot;</span> &lt;&lt; color &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">buildBikeHeight</span><span class="params">(<span class="keyword">int</span> height)</span> </span>&#123;</span><br><span class="line">    _bike-&gt;_height = height;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;build standard bike height: &quot;</span> &lt;&lt; height &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> Bicycle* <span class="title">getBike</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;building standard bike finished: color: &quot;</span> &lt;&lt; _bike-&gt;_color &lt;&lt; <span class="string">&quot; height: &quot;</span> &lt;&lt; _bike-&gt;_height &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> _bike;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  Bicycle* _bike;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Client</span>(bicycleBuilder* bicycleBuilder): <span class="built_in">bicycleBuilder_</span>(bicycleBuilder) &#123;&#125;</span><br><span class="line">  <span class="function">Bicycle* <span class="title">makeBike</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    bicycleBuilder_-&gt;<span class="built_in">buildBicycle</span>();</span><br><span class="line">    bicycleBuilder_-&gt;<span class="built_in">buildBikeColor</span>(<span class="string">&quot;red&quot;</span>);</span><br><span class="line">    bicycleBuilder_-&gt;<span class="built_in">buildBikeHeight</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> bicycleBuilder_-&gt;<span class="built_in">getBike</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  bicycleBuilder* bicycleBuilder_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">  Client* client = <span class="keyword">new</span> <span class="built_in">Client</span>(<span class="keyword">new</span> <span class="built_in">standardBikeBuilder</span>());</span><br><span class="line">  Bicycle* newBike = client-&gt;<span class="built_in">makeBike</span>();</span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;newBike color: &quot;</span> &lt;&lt; newBike-&gt;_color &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2021/07/07/AbstractFactoryPattern/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/07/AbstractFactoryPattern/" class="post-title-link" itemprop="url">Abstract Factory Pattern</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-07-07 14:36:04 / Modified: 16:12:44" itemprop="dateCreated datePublished" datetime="2021-07-07T14:36:04+10:00">2021-07-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Abstract-Factory-Pattern"><a href="#Abstract-Factory-Pattern" class="headerlink" title="Abstract Factory Pattern"></a>Abstract Factory Pattern</h1><p>The abstract factory pattern provides a way to encapsulate a group of individual factories that have a common theme without specifying their concrete classes.</p>
<p>The UML class diagram shows below:</p>
<p><img src="https://res.cloudinary.com/dlnr9fafw/image/upload/c_scale,h_448/v1625633411/Abstract_factory_UML_zg4myq.svg"></p>
<p>C++ code example:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Button</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      std::cout &lt;&lt; <span class="string">&quot;Render a general style\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinuxButton</span> :</span> <span class="keyword">public</span> Button &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      std::cout &lt;&lt; <span class="string">&quot;Render a button in Linux style\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WindowsButton</span> :</span> <span class="keyword">public</span> Button &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      std::cout &lt;&lt; <span class="string">&quot;Render a button in Windows style\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MacOSButton</span> :</span> <span class="keyword">public</span> Button &#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">paint</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      std::cout &lt;&lt; <span class="string">&quot;Render a button in MacOSButton style\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GUIFactory</span> &#123;</span></span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">  	<span class="function"><span class="keyword">virtual</span> Button* <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Button</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinuxFactory</span>:</span> <span class="keyword">public</span> GUIFactory &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> Button* <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">LinuxButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WindowsFactory</span>:</span> <span class="keyword">public</span> GUIFactory &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> Button* <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">WindowsButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MacOSFactory</span>:</span> <span class="keyword">public</span> GUIFactory &#123;</span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> Button* <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">MacOSButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Client</span>(GUIFactory* factory): <span class="built_in">factory_</span>(factory) &#123;&#125;</span><br><span class="line">  <span class="function">Button* <span class="title">makeButton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> factory_-&gt;<span class="built_in">makeButton</span>();</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  GUIFactory* factory_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">  std::string platform = argv[<span class="number">1</span>];</span><br><span class="line">  std::cout &lt;&lt; <span class="string">&quot;platform: &quot;</span> &lt;&lt; platform &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">  Client* client;</span><br><span class="line">  <span class="keyword">if</span>(platform == <span class="string">&quot;linux&quot;</span>) &#123;</span><br><span class="line">    client = <span class="keyword">new</span> <span class="built_in">Client</span>(<span class="keyword">new</span> <span class="built_in">LinuxFactory</span>());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(platform == <span class="string">&quot;windows&quot;</span>) &#123;</span><br><span class="line">    client = <span class="keyword">new</span> <span class="built_in">Client</span>(<span class="keyword">new</span> <span class="built_in">WindowsFactory</span>());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span>(platform == <span class="string">&quot;macOS&quot;</span>) &#123;</span><br><span class="line">    client = <span class="keyword">new</span> <span class="built_in">Client</span>(<span class="keyword">new</span> <span class="built_in">MacOSFactory</span>());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Not supported: &quot;</span> &lt;&lt; platform &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  Button* button = client-&gt;<span class="built_in">makeButton</span>();</span><br><span class="line">  button-&gt;<span class="built_in">paint</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2021/07/07/Scheduling/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/07/Scheduling/" class="post-title-link" itemprop="url">Scheduling</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-07-07 13:42:48 / Modified: 14:05:54" itemprop="dateCreated datePublished" datetime="2021-07-07T13:42:48+10:00">2021-07-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Scheduling"><a href="#Scheduling" class="headerlink" title="Scheduling"></a>Scheduling</h1><p>When a computer is multiprogrammed, it has multiple process or threads competing for the CPU at the same time,  and if only <strong>one CPU</strong> is available, a choice has to be made which process to run next.</p>
<p>The <strong>scheduler</strong> is the part of the OS that makes the choice, using scheduling algorithm.</p>
<ol>
<li><p>Process Behaviour</p>
<ul>
<li>Compute-bound</li>
<li>I/O-bound</li>
</ul>
</li>
<li><p>When to Schedule</p>
<ul>
<li>When a new process is created, a decision needs to be makde whether to run the parent process or the child process.</li>
<li>When a process exits.</li>
<li>When a process blocks on I/O, on a semaphore, or for some other reason, another process has to be selected to run.</li>
<li>When an I/O interrupt occurs.</li>
<li>Scheduling algorithms<ul>
<li>two categories with respect to how they deal with clock interrupts<ul>
<li>Nonpreemptive scheduling algorithm</li>
<li>Preemptive scheduling algorithm</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Catogories of Scheduling Algorithms</p>
<p>In different situations, different scheduling algorithms are needed.</p>
<ul>
<li>Batch</li>
<li>Interactive</li>
<li>Real time</li>
</ul>
</li>
<li><p>Scheduling Algorithms Goals</p>
<ul>
<li>All Systems<ul>
<li>Fairness - giving each process a fair share of the CPU</li>
<li>Policy enforcement - seeing that stated policy is carried out</li>
<li>Balance - keeping all parts of the system busy</li>
</ul>
</li>
<li>Batch Systems<ul>
<li>Throughput - maximize jobs per hour</li>
<li>Turnaround time - minimize time between submission and termination</li>
<li>CPU utilization - keep the CPU busy all the time.</li>
</ul>
</li>
<li>Interactive systems<ul>
<li>Response time - respond to requests quickly</li>
<li>Proportionality - meet users expections</li>
</ul>
</li>
<li>Real-time Systems<ul>
<li>Meeting deadlines - avoid losing data</li>
<li>Predictability - avoid quality degradation in multimedia systems</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="Scheduling-in-Batch-Systems"><a href="#Scheduling-in-Batch-Systems" class="headerlink" title="Scheduling in Batch Systems"></a>Scheduling in Batch Systems</h4><h5 id="First-Come-First-Served"><a href="#First-Come-First-Served" class="headerlink" title="First-Come First-Served"></a>First-Come First-Served</h5><ul>
<li>nonpreemptive</li>
<li>easy to understand and equally easy to program</li>
<li>can be implemented via linked-list</li>
<li>Disadvantage: Throughput can be low </li>
</ul>
<h5 id="Shortest-Job-First"><a href="#Shortest-Job-First" class="headerlink" title="Shortest Job First"></a>Shortest Job First</h5><ul>
<li>nonpreemptive algorithm that assumes the run times are know in advance</li>
<li>Consider the case of tour jobs, with run times of a, b, c, and d, respectively. The mean turnaround time is (4a + 3b + 2c + d) / A<ul>
<li><em>a</em> contributes more to the average than the other times, so it should be the shortest job</li>
</ul>
</li>
<li>only optimal when all the jobs are available simultaneously</li>
</ul>
<h5 id="Shortest-Remaing-Time-Next"><a href="#Shortest-Remaing-Time-Next" class="headerlink" title="Shortest Remaing Time Next"></a>Shortest Remaing Time Next</h5><ul>
<li>preemptive version of shortest job first</li>
<li>the scheduler always chooses the process whose remaining run time is the shortest</li>
<li>this scheme allows nwe short jobs to get good service</li>
</ul>
<h4 id="Scheduling-in-Interactive-Systems"><a href="#Scheduling-in-Interactive-Systems" class="headerlink" title="Scheduling in Interactive Systems"></a>Scheduling in Interactive Systems</h4><h5 id="Round-Robin-Scheduling"><a href="#Round-Robin-Scheduling" class="headerlink" title="Round-Robin Scheduling"></a>Round-Robin Scheduling</h5><p>Each process is assigned a time interval, called its quantum, during which it is allowed to run. If the process is still running at the end of the quantum, the CPU is preempted and given to another process. If the process has blocked or finished before the quantum has elapsed, the CPU switching is done when the process blocks, of course.</p>
<ul>
<li>the scheduler maintains a lsit of runnable process. When the process uses up its quantum, it is put on the end of the list.</li>
</ul>
<h6 id="The-length-of-die-quantum"><a href="#The-length-of-die-quantum" class="headerlink" title="The length of die quantum"></a>The length of die quantum</h6><p>Switching from one process to another requires time, so process swithcing or context switch takes time.</p>
<p>To improve the CPU efficiency, we should set the quantum to a large number, compared with switching time. </p>
<p>Disadvantage: this situation is bad if some of the requests near the end of the queue requires only a few milliseconds of CPU time.</p>
<p>Conclusion:</p>
<p>setting the quantum too short causes too many process switches and lowers the CPU efficiency, but setting it too long may cause poor response to short interactive requests. A quantum around 20-50 msec is often a reasonable compromise.</p>
<h5 id="Priority-Scheduling"><a href="#Priority-Scheduling" class="headerlink" title="Priority Scheduling"></a>Priority Scheduling</h5><p>Each process is assigned a priority, and the runnable process with the highest priority is allowed to run.</p>
<p>To prevent high-priority processes from runing indefinitely:</p>
<ul>
<li>Decrease the priority of the currently running process at each clock tick.</li>
<li>Each process may be assigned a maximum time quantum that its allowed to run.</li>
</ul>
<p>Group processes into priority classes and use priority scheduling among the classes but round-robin scheduling with each class.</p>
<ul>
<li>If priorities are not adjusted occasionally, lower priority classes may all starve to death.</li>
</ul>
<h5 id="Multiple-Queues"><a href="#Multiple-Queues" class="headerlink" title="Multiple Queues"></a>Multiple Queues</h5><p>It was more efficient to give CPU-bound processes a large quantum once in a while, rather than giving them small quantum frequently(to reduce swapping).</p>
<p>However, giving all processes a large quantum would mean poor response time.</p>
<p></p>
<p>The solution was to set up priority classes.</p>
<hr>
<p>Example:</p>
<p>A process that needs to compute continuously for 100 quanta.</p>
<p>Algorithm:</p>
<blockquote>
<p>Initially be given one quantum, then swapped out.</p>
<p>Next time it woud get two quanta before being swapped out.</p>
<p>Then it would get 4, 8, 16, 32 and 64 quanta.</p>
<p>It would have used only 37 of the final 64 quanta to complete.</p>
<p>Only 7 swaps instead of 100 with a pure round-robin algorithm</p>
</blockquote>
<hr>
<h5 id="Shorest-Process-Next"><a href="#Shorest-Process-Next" class="headerlink" title="Shorest Process Next"></a>Shorest Process Next</h5><blockquote>
<p>The only problem is figuring out which of the currently runnable processes is the shortest one.</p>
<blockquote>
<p>Making estimates based on past behaviour and run the process with the shortest estimated running time.</p>
<blockquote>
<p>Suppose that the estimated time per command for some terminal is T<sub>0</sub> , and suppose its next run is measured  T<sub>1</sub> , we could update our estimate by taking a weighted sum of these two numbers:</p>
<p>a T<sub>0</sub> + (1 - a) T<sub>1</sub></p>
<p>Through the choice of <em>a</em> we can decide to have the estimation process forget old runs quickly, or remember them for a long time.</p>
<p>With <em>a</em> = 1/2, we get the successive estimates of:</p>
<p>T<sub>0</sub> </p>
<p>T<sub>0</sub> / 2 + T<sub>1</sub> / 2</p>
<p>T<sub>0</sub> / 4 + T<sub>1</sub> / 4 + T<sub>2</sub> / 2</p>
<p>T<sub>0</sub> / 8 + T<sub>1</sub> / 8 + T<sub>2</sub> / 4 + T<sub>3</sub> / 2</p>
</blockquote>
<p>Aging:</p>
<blockquote>
<p>The technique of estimating the next value in a series by taking the weighted average of the current measured value and the previous estimated.</p>
</blockquote>
</blockquote>
</blockquote>
<h5 id="Guaranteed-Scheduling"><a href="#Guaranteed-Scheduling" class="headerlink" title="Guaranteed Scheduling"></a>Guaranteed Scheduling</h5><p>Making real promises to the users about performance.</p>
<blockquote>
<p>If there are n users logged in, one use will receive aobut 1/n of the CPU power.</p>
</blockquote>
<h5 id="Lottery-Scheduling"><a href="#Lottery-Scheduling" class="headerlink" title="Lottery Scheduling"></a>Lottery Scheduling</h5><blockquote>
<p>Basic idea:</p>
<p>To give processes lottery tickets for various system resources, such as CPU time. Whenever a scheduling decision has to be made, a lottery ticket is chosen at random, and the process holding that ticket gets the resource.</p>
<p>Exmaple:</p>
<p>Suppose: the system holds a lottery 50 times a second</p>
<p>Then: each winner getting 20 msec of CPU time as a price</p>
<blockquote>
<p>1 / 50 = 0.02s = 20 msec</p>
</blockquote>
<p>To paraphrase <strong>George Orwell</strong>:</p>
<blockquote>
<p>All processes are equal, but some processes are more equal than other.</p>
<blockquote>
<p>Original quote: All animals are equal, but some animals are more equal than others</p>
</blockquote>
</blockquote>
<p>More important processes can be given extra tickets to increase their odds of winning.</p>
<blockquote>
<p>Example:</p>
<p>100 tickets outstanding, and one process holds 20 of them.</p>
<p>Then it will have a 20% chance of wining each lottery, in the long run, it will get about 20% of the CPU.</p>
</blockquote>
<p>The rule is clear:</p>
<blockquote>
<p>a process holding a fraction <em>f</em> of the ciekts will get about a fraction <em>f</em> of the resource.</p>
</blockquote>
<p>Interegsting properties:</p>
<ol>
<li><p>lottery scheduling is highly responsive</p>
</li>
<li><p>Cooperating processes may exchange tickets if they wish</p>
</li>
<li><p>Solve problems that are difficult to handle with other methods</p>
<blockquote>
<p>Video server exmaple</p>
</blockquote>
</li>
</ol>
</blockquote>
<h5 id="Fair-Share-Scheduling"><a href="#Fair-Share-Scheduling" class="headerlink" title="Fair-Share Scheduling"></a>Fair-Share Scheduling</h5><blockquote>
<p>Some systems take into accout who owns a process before scheduling it.</p>
</blockquote>
<blockquote>
<p>In this model, each user is allocated some fraction fo the CPU and the scheduler picks processes in such a way as to enforce it.</p>
</blockquote>
<h4 id="Scheduling-in-Real-Time-Systems"><a href="#Scheduling-in-Real-Time-Systems" class="headerlink" title="Scheduling in Real-Time Systems"></a>Scheduling in Real-Time Systems</h4><blockquote>
<p><strong>Real-time system</strong>:</p>
<p>in which time plays an essential role. Typically, one or more physical devices external to the computer generate stimuli, and the comuter must react appropriately to them with a fixed amount of time.</p>
<p>Example:</p>
<ol>
<li>the computer in a compact dics player</li>
<li>patient monitoring in a hospital ICU.</li>
<li>the autopilot in an aircraft</li>
<li>robot control in an automated factory.</li>
</ol>
<p><strong>Having the right answer but having it too late is often just as bad as not having it at all</strong>.</p>
<p>Categories two types:</p>
<ol>
<li>hard real time<ul>
<li>Having absolute deadlines must be met</li>
</ul>
</li>
<li>soft real time<ul>
<li>missing an occasional deadline is undesirable, but nevertheless tolerable.</li>
</ul>
</li>
</ol>
<p>In both cases, real-time behaviour is achieved by dividing the program into a number of processes, each of whose behaviour is predictable and known in advance.</p>
<blockquote>
<p>these processes are short lived and can run to completion in well under a second.</p>
</blockquote>
<p><strong>Events</strong></p>
<p>Periodic  | Aperiodic</p>
<p>A system may have to respond to multiple periodic event streams, depending on how much time each event requires for proceessing, it may not even be possible to handle them all.</p>
<p>Example:</p>
<p>suppose there are <em>m</em> periodic events and event <em>i</em> occurs with period P<sub>i</sub> and requires C<sub>i</sub> seconds of CPU time to handle each event, then the <strong>load</strong> can be handled if:<br>$$<br>\sum_{i=1}^{m} \frac{C_{i}}{P_{i}} \le 1<br>$$<br>A real-time system that meets this criterion is said to be <strong>schedulable</strong>.</p>
<p><strong>Scheduling algorithms</strong></p>
<p>Static | Dynamic</p>
</blockquote>
<h4 id="Policy-versus-Mechanism"><a href="#Policy-versus-Mechanism" class="headerlink" title="Policy versus Mechanism"></a>Policy versus Mechanism</h4><blockquote>
<p>None of the schedulers discussed above accept any input from user processes about scheduling decisions.</p>
<p>The solution to this problem is to separate the scheduling mechanism from the scheduling policy.</p>
<p>What is means is that the scheduling algorithm is parameterized in some way, and the parameters can be provided by user processes.</p>
</blockquote>
<h4 id="Thread-Scheduling"><a href="#Thread-Scheduling" class="headerlink" title="Thread Scheduling"></a>Thread Scheduling</h4><p>When several processes each have multiple threads, we have two levels of parallelism present: processes and threads.</p>
<p>Scheduling in such systems differs greatly depending on whether user-level threads or kernel-level threads (or both) are supported.</p>
<p><strong>User-level threads</strong></p>
<blockquote>
<p>The kernel is not aware of the existence of threads, it picks a process (A) and gives A control of its quantum. The thread scheduler inside A decides which thread to run, say A<sub>1</sub>, since there are no clock interrupts to multiprogram threads, this thread may continue running as long as it wants to. If it uses up the process entire quantum, the kernel will select another process to run.</p>
</blockquote>
<blockquote>
<p>Consider the case that As threads ahve relatively little work to do per CPU burst.</p>
<p>The scheduling algorithm used by the run-time system can be any of the ones described above. Round-robin and priority scheduling are most common in practice.</p>
<p>The only constraint is the absence of a clock to interrupt a thread that has run too long.</p>
</blockquote>
<p><strong>Kernel-level threads</strong></p>
<blockquote>
<p>Here the kernel picks a particular thread to run.</p>
</blockquote>
<p><strong>Difference between two level threads</strong></p>
<blockquote>
<p>A major difference is performance.</p>
<ul>
<li><p>Doing a thread switch with user-level threads takes a handful of machine instructions</p>
<p>Doing a thread switch with kernel-level requires a full context switch, changing the memory map and invalidating the cache, which is several orders of magnitude slower</p>
</li>
<li><p>With kernel-level threads, having a thread block on I/O, does not suspend the entire process as it does with user-level threads</p>
</li>
<li><p>User-level threads can employ an application-specific thread scheduler.</p>
</li>
</ul>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2021/07/07/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/07/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-07 13:40:08" itemprop="dateCreated datePublished" datetime="2021-07-07T13:40:08+10:00">2021-07-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2021/01/18/The-Readers-and-Writers-Problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/18/The-Readers-and-Writers-Problem/" class="post-title-link" itemprop="url">The Readers and Writers Problem</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-18 22:08:17" itemprop="dateCreated datePublished" datetime="2021-01-18T22:08:17+11:00">2021-01-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-09 10:48:54" itemprop="dateModified" datetime="2021-07-09T10:48:54+10:00">2021-07-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h5><p>This problem models access to a database. Imagine, an airline reservation system, with many competing processes wishing to read and write it. It is acceptable to have multiple processes reading the database at the same time, but if one process is updating (writing) the database, no other processes may have access to the database, not even readers.</p>
<p>The question how to program the readers and the writers.</p>
<h5 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> semaphore;</span><br><span class="line">semaphore mutex = <span class="number">1</span>;</span><br><span class="line">semaphore db = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> rc = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">reader</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(TRUE)</span><br><span class="line">  &#123;</span><br><span class="line">		down(&amp;mutex);</span><br><span class="line">    rc = rc + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(rc == <span class="number">1</span>) down(&amp;db);</span><br><span class="line">    up(&amp;mutex);</span><br><span class="line">    read_data_base();</span><br><span class="line">    down(&amp;mutex);</span><br><span class="line">    rc = rc - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(rc == <span class="number">0</span>) up(&amp;db);</span><br><span class="line">    up(&amp;mutex);</span><br><span class="line">    use_data_read();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">writer</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(TRUE)</span><br><span class="line">  &#123;</span><br><span class="line">    think_up_data();</span><br><span class="line">    down(&amp;db);</span><br><span class="line">    write_data_base();</span><br><span class="line">    up(&amp;db);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The first reader to get access to the database does a down on the semaphore <em>db</em>. Subsquent readers merely increment a counter, <em>rc</em>. As readers leave, they decrement the counter, and the last one out does an up on the semaphore, allowing a blocked writer, if there is on, to get in.</p>
<p>One thing worth noting: suppose that while a reader is using the database, another reader comes along. Since having two readers at the same time is not a problem, the second reader is admitted. Additional readers can also be admitted if they come along.</p>
<p>Now suppose that a writer shows up. The writer may not be admitted to the database, since writers must have exclusive access, so the writer is suspended. Later, additional readers show up. As long as at least one reader is still active, subsequent readers are admitted. As a consequence of this strategy, as long as there is a steady supply of readers, they will all get in as soon as they arrive. The writer will be kept suspended until no reader is present. If a new reader arrives every 2 seconds, and each reader takes 5 seconds to do its work, the writer will never get in.</p>
<p>To prevent this situation, the program could be written slightly differently: when a reader arrives and a writer is waiting, the reader is suspended behind the writer instead of being admitted immediately. In this way, a writer has to wait for reader that were active when it arrived to finish but doesnt have to wait or readers that came along after it. The disadvantage of this solution is that it achieves less concurrenct and thus lower performance.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://mingkaima.xyz/2020/12/16/The-Dining-Philosophers-Problem/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Mingkai Ma">
      <meta itemprop="description" content="Mingkai's personal blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mingkai's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/16/The-Dining-Philosophers-Problem/" class="post-title-link" itemprop="url">The Dining Philosophers Problem</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-12-16 21:25:54" itemprop="dateCreated datePublished" datetime="2020-12-16T21:25:54+11:00">2020-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-09 10:26:33" itemprop="dateModified" datetime="2021-07-09T10:26:33+10:00">2021-07-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Operating-System/" itemprop="url" rel="index"><span itemprop="name">Operating System</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h5><p>Five philosophers are seated around a circular table. Each philosopher has a plate of spaghetti. The spaghetti is so slippery that a philosopher needs two forks to eat it. Between each pair of plates is one fork. The life of a philosopher consists of alternate periods of eating and thinking. When a philosopher gets hungry, she tried to acquire her left and right forks, one at a time, in either order. If successful in acquiring two forks, she eats for a while, then puts down the forks, and continues to think.</p>
<p>The key question is: Is there a program for each philosopher that does hwat it it supposed to do and never gets stuck?</p>
<h5 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h5><h6 id="The-obvious-solution-but-wrong"><a href="#The-obvious-solution-but-wrong" class="headerlink" title="The obvious solution but wrong."></a>The obvious solution but wrong.</h6><blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 5</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">philosopher</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(TRUE)</span><br><span class="line">&#123;</span><br><span class="line"> think();</span><br><span class="line"> take_fork(i);</span><br><span class="line"> take_fork((i + <span class="number">1</span>) % N);</span><br><span class="line"> eat();</span><br><span class="line"> put_fork(i);</span><br><span class="line"> put_fork((i + <span class="number">1</span>) % N);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Its wrong because that suppose that all five philosophers take their left forks simultaneously, <strong>none</strong> will be able to take their right forks, and there will be a <strong>deadlock</strong>.</p>
</blockquote>
<h6 id="A-modified-solution-but-wrong"><a href="#A-modified-solution-but-wrong" class="headerlink" title="A modified solution but wrong"></a>A modified solution but wrong</h6><blockquote>
<p>Modify the program so that after taking the left fork, the program checks to see if the right fork is available. If it is not, the philosopher puts down the left one, waits for some time, and then repeats the whole process.</p>
<p>This proposal fails too. With a little bit of bad luck, all the philosophers could start the algorithm simultaneously, picking up their left forks, seeing that their right forks were not available, putting down their left forks, waiting, picking up their left forks again simultaneously, and so on, forever.</p>
<p>This is <strong>starvation</strong>, a situation in which all the programs continue to run indefinitely but fail to make any progress.</p>
</blockquote>
<h6 id="A-modified-solution-working-with-random-waiting-time"><a href="#A-modified-solution-working-with-random-waiting-time" class="headerlink" title="A modified solution, working with random waiting time."></a>A modified solution, working with random waiting time.</h6><blockquote>
<p>If the philosopher would just wait a random time instead of the same time after failing to acquire the right-hand fork, the chance that everything would continue in lockstep for even an hour is very small.</p>
<p>This observation is true, and in nearly all applications trying again later is not a problem.</p>
<p>In practice this solution works fine, but in a few applications one would prefer a solution taht always works  and cannot fail due to an unlikely series of random numbers. Think about safety control in a nuclear power plant.</p>
</blockquote>
<h6 id="Good-solution"><a href="#Good-solution" class="headerlink" title="Good solution"></a>Good solution</h6><blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N					5</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LEFT			(i + N - 1) % N</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RIGHT			(i + 1) % N</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> THINKING 	0</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HUNGRY		1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> EATING		2</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> semaphore;</span><br><span class="line"><span class="keyword">int</span> state[N];</span><br><span class="line">semaphore mutex = <span class="number">1</span>;</span><br><span class="line">semaphore s[N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">philosopher</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(TRUE)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">take_forks</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">down(&amp;mutex);</span><br><span class="line">state[i] = HUNGRY;</span><br><span class="line">test(i);</span><br><span class="line">up(&amp;mutex);</span><br><span class="line">down(&amp;s[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">put_forks</span><span class="params">(<span class="keyword">int</span> i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	down(&amp;mutex);</span><br><span class="line">state[i] = THINKING;</span><br><span class="line">test(LEFT);</span><br><span class="line">test(RIGHT);</span><br><span class="line">up(&amp;mutex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">(i)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(state[i] == HUNGRY &amp;&amp; state[LEFT] != EATING &amp;&amp; state[RIGHT] != EATING)</span><br><span class="line">&#123;</span><br><span class="line">		state[i] = EATING;</span><br><span class="line"> up(&amp;s[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>The program uses an array of semaphores, one per philosopher, so hungry philosophers can block if the needed forks are busy.</p>
<p>Each process runs the procedure philosopher as its main code. For other procedures, including <em>take_forks</em>, <em>put_forks</em> and <em>test</em> are ordinary procedures and not separate processes.</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Mingkai Ma</p>
  <div class="site-description" itemprop="description">Mingkai's personal blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/MingkaiMa" title="GitHub  https:&#x2F;&#x2F;github.com&#x2F;MingkaiMa" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mingkai Ma</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
